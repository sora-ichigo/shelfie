"""Error object for authentication operations"""
type AuthError {
  """Error code"""
  code: AuthErrorCode

  """Field that caused the error, if applicable"""
  field: String

  """Human-readable error message"""
  message: String

  """Whether the operation can be retried"""
  retryable: Boolean
}

"""Error codes for authentication operations"""
enum AuthErrorCode {
  EMAIL_ALREADY_EXISTS
  INTERNAL_ERROR
  INVALID_CREDENTIALS
  INVALID_PASSWORD
  INVALID_TOKEN
  NETWORK_ERROR
  TOKEN_EXPIRED
  UNAUTHENTICATED
  USER_NOT_FOUND
}

"""Error object for query results"""
type AuthErrorResult {
  """Error code"""
  code: AuthErrorCode

  """Field that caused the error, if applicable"""
  field: String

  """Human-readable error message"""
  message: String

  """Whether the operation can be retried"""
  retryable: Boolean
}

"""
A date-time string at UTC, such as 2007-12-03T10:15:30Z, compliant with the `date-time` format outlined in section 5.6 of the RFC 3339 profile of the ISO 8601 standard for representation of dates and times using the Gregorian calendar.
"""
scalar DateTime

"""Result of successful login"""
type LoginResult {
  """Firebase ID token for API authentication"""
  idToken: String!

  """Logged in user"""
  user: User!
}

"""Input for user login"""
input LoginUserInput {
  """Email address"""
  email: String!

  """Password"""
  password: String!
}

"""Result of me query - either User or AuthErrorResult"""
union MeResult = AuthErrorResult | User

type Mutation {
  """Login with email and password"""
  loginUser(input: LoginUserInput!): MutationLoginUserResult

  """Register a new user with email and password"""
  registerUser(input: RegisterUserInput!): MutationRegisterUserResult
}

union MutationLoginUserResult = AuthError | MutationLoginUserSuccess

type MutationLoginUserSuccess {
  data: LoginResult!
}

union MutationRegisterUserResult = AuthError | MutationRegisterUserSuccess

type MutationRegisterUserSuccess {
  data: User!
}

type Query {
  health: String

  """Get the currently authenticated user"""
  me: MeResult!
}

"""Input for user registration"""
input RegisterUserInput {
  """Email address"""
  email: String!

  """Password"""
  password: String!
}

"""A user in the system"""
type User {
  """When the user was created"""
  createdAt: DateTime

  """The email address of the user"""
  email: String

  """The unique identifier of the user"""
  id: Int

  """When the user was last updated"""
  updatedAt: DateTime
}