# Requirements Document

## Introduction

本ドキュメントは、Shelfie モバイルアプリケーションにおけるアカウント画面機能の要件を定義する。アカウント画面はユーザーが自身のプロフィール情報を確認・編集し、各種設定にアクセスするためのハブとなる画面である。本フェーズでは、アカウント画面の項目一覧表示とプロフィール編集機能を実装する。

## Requirements

### Requirement 1: アカウント画面メイン

**Objective:** As a ユーザー, I want アカウント画面でプロフィール概要と各種設定メニューを一覧で確認したい, so that 自分のアカウント情報へ素早くアクセスできる

#### Acceptance Criteria

1. When ユーザーがアカウント画面を開いた時, the アカウント画面 shall ヘッダーに「アカウント」タイトルと閉じるボタン（×）を表示する
2. When アカウント画面が表示された時, the アカウント画面 shall プロフィールカードにユーザーアバター、氏名、ユーザー名（@形式）、登録冊数、読書開始年を表示する
3. The アカウント画面 shall 「アカウント」セクションに「プロフィール編集」メニュー項目を表示する
4. The アカウント画面 shall 「アカウント」セクションに「プレミアムプラン」メニュー項目をバッジ付きで表示する
5. The アカウント画面 shall 「設定」セクションに「通知設定」「パスワード設定」「テーマ」メニュー項目を表示する
6. While テーマ設定が「ダーク」の場合, the アカウント画面 shall テーマメニュー項目に「ダーク」バッジを表示する
7. When ユーザーが閉じるボタンをタップした時, the アカウント画面 shall 画面を閉じて前の画面に戻る

### Requirement 2: プロフィール編集画面

**Objective:** As a ユーザー, I want 自分のプロフィール情報を編集したい, so that 最新の情報を他のユーザーに表示できる

#### Acceptance Criteria

1. When ユーザーがアカウント画面で「プロフィール編集」をタップした時, the アプリ shall プロフィール編集画面に遷移する
2. When プロフィール編集画面が表示された時, the プロフィール編集画面 shall ヘッダーに「プロフィール編集」タイトル、閉じるボタン（×）、保存ボタン（✓）を表示する
3. When プロフィール編集画面が表示された時, the プロフィール編集画面 shall 編集可能なアバター（鉛筆アイコン付き）を画面上部中央に表示する
4. The プロフィール編集画面 shall 「氏名」入力フィールドに現在の氏名を表示する
5. The プロフィール編集画面 shall 「メールアドレス」入力フィールドに現在のメールアドレスを表示する
6. The プロフィール編集画面 shall メールアドレスフィールドの下に「メールアドレスを変更すると、確認メールが送信されます。新しいメールアドレスで確認が完了するまで、変更は反映されません。」という注意書きを表示する

### Requirement 3: プロフィール保存処理

**Objective:** As a ユーザー, I want 編集したプロフィール情報を保存したい, so that 変更内容が反映される

#### Acceptance Criteria

1. When ユーザーが氏名を編集して保存ボタンをタップした時, the プロフィール編集画面 shall 氏名の更新リクエストをAPIに送信する
2. When プロフィール更新が成功した時, the プロフィール編集画面 shall 画面を閉じてアカウント画面に戻る
3. When プロフィール更新が成功した時, the アカウント画面 shall 更新された氏名をプロフィールカードに反映する
4. If プロフィール更新が失敗した場合, then the プロフィール編集画面 shall エラーメッセージを表示する
5. While プロフィール更新中, the プロフィール編集画面 shall ローディングインジケーターを表示し、保存ボタンを無効化する
6. If 氏名が空の場合, then the プロフィール編集画面 shall 保存ボタンを無効化する

### Requirement 4: アバター編集機能

**Objective:** As a ユーザー, I want プロフィールのアバター画像を変更したい, so that 自分を表す画像を設定できる

#### Acceptance Criteria

1. When ユーザーがプロフィール編集画面でアバターをタップした時, the プロフィール編集画面 shall 画像選択オプション（カメラ撮影/ギャラリーから選択）を表示する
2. When ユーザーがギャラリーから画像を選択した時, the プロフィール編集画面 shall 選択された画像をアバタープレビューに表示する
3. When ユーザーがカメラで撮影した時, the プロフィール編集画面 shall 撮影された画像をアバタープレビューに表示する
4. When アバター画像が変更されて保存ボタンがタップされた時, the プロフィール編集画面 shall 画像をアップロードしてプロフィールを更新する
5. If 画像アップロードが失敗した場合, then the プロフィール編集画面 shall エラーメッセージを表示する

### Requirement 5: メールアドレス変更機能

**Objective:** As a ユーザー, I want メールアドレスを変更したい, so that 新しいメールアドレスでアカウントを管理できる

#### Acceptance Criteria

1. When ユーザーがメールアドレスを編集して保存ボタンをタップした時, the プロフィール編集画面 shall 新しいメールアドレスへ確認メールを送信するリクエストをAPIに送信する
2. When メールアドレス変更リクエストが成功した時, the プロフィール編集画面 shall 「確認メールを送信しました」というメッセージを表示する
3. If 無効なメールアドレス形式の場合, then the プロフィール編集画面 shall バリデーションエラーを表示する
4. If 既に登録済みのメールアドレスの場合, then the プロフィール編集画面 shall 「このメールアドレスは既に使用されています」エラーを表示する

### Requirement 6: 画面ナビゲーション

**Objective:** As a ユーザー, I want 各設定画面へスムーズに移動したい, so that 目的の設定を素早く変更できる

#### Acceptance Criteria

1. When ユーザーが「プレミアムプラン」をタップした時, the アカウント画面 shall プレミアムプラン画面に遷移する（将来実装）
2. When ユーザーが「通知設定」をタップした時, the アカウント画面 shall 通知設定画面に遷移する（将来実装）
3. When ユーザーが「パスワード設定」をタップした時, the アカウント画面 shall パスワード設定画面に遷移する（将来実装）
4. When ユーザーが「テーマ」をタップした時, the アカウント画面 shall テーマ設定画面に遷移する（将来実装）
5. The 各メニュー項目 shall 右端に矢印アイコン（>）を表示して遷移可能であることを示す
